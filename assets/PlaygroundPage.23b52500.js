var I=Object.defineProperty;var r=(e,t)=>I(e,"name",{value:t,configurable:!0});import{a as C,l as O,d as s,S as x,t as D}from"./vendor.7f6460ea.js";import{v as F,T as N,B as b,a as k}from"./index.52e9424c.js";import{S as L}from"./Skeleton.55c5e060.js";import{P as q}from"./PageNav.95afb7be.js";function p(e){return e&&e.origin?e.origin:"https://stackblitz.com"}r(p,"e");var M="300";function E(){return Math.random().toString(36).substring(7)}r(E,"n");function l(e){var t=[];return e&&(e.forceEmbedLayout&&t.push("embed=1"),e.clickToLoad&&t.push("ctl=1"),typeof e.openFile=="string"&&t.push("file="+e.openFile),Array.isArray(e.openFile)&&e.openFile.forEach(function(n){typeof n=="string"&&t.push("file="+n)}),e.view!=="preview"&&e.view!=="editor"||t.push("view="+e.view),e.theme!=="light"&&e.theme!=="dark"||t.push("theme="+e.theme),e.hideExplorer&&t.push("hideExplorer=1"),e.hideNavigation&&t.push("hideNavigation=1"),e.hideDevTools&&t.push("hidedevtools=1"),typeof e.devToolsHeight=="number"&&e.devToolsHeight>=0&&e.devToolsHeight<=100&&t.push("devtoolsheight="+Math.round(e.devToolsHeight))),t.length?"?"+t.join("&"):""}r(l,"i");function g(e,t,n){if(e.parentNode===null)throw new Error("Invalid Element");t.id=e.id,A(t,n),e.parentNode.replaceChild(t,e)}r(g,"o");function v(e){if(typeof e=="string"){var t=document.getElementById(e);if(t!==null)return t}else if(e instanceof HTMLElement)return e;throw new Error("Invalid Element")}r(v,"r");function y(e){return e&&e.newWindow===!1?"_self":"_blank"}r(y,"a");function A(e,t){t&&(t.hasOwnProperty("height")&&(e.height=""+t.height),t.hasOwnProperty("width")&&(e.width=""+t.width)),e.height||(e.height=M),e.width||e.setAttribute("style","width:100%;")}r(A,"d");var S=r(function(e){var t=this;this.pending={},this.port=e,this.port.onmessage=function(n){if(n.data.payload.__reqid){var i=n.data.payload.__reqid,o=n.data.payload.__success;if(t.pending[i]){if(delete n.data.payload.__reqid,delete n.data.payload.__success,o){var a=Object.keys(n.data.payload).length===0&&n.data.payload.constructor===Object?null:n.data.payload;t.pending[i].resolve(a)}else{var u=n.data.payload.error?n.data.type+": "+n.data.payload.error:n.data.type;t.pending[i].reject(u)}delete t.pending[i]}}}},"c");S.prototype.request=function(e){var t=this,n=E();return new Promise(function(i,o){t.pending[n]={resolve:i,reject:o},e.payload.__reqid=n,t.port.postMessage(e)})};var h=r(function(e,t){var n=this;this.rdc=new S(e),this.preview={},Object.defineProperty(this.preview,"origin",{value:t.previewOrigin,writable:!1}),this.editor={openFile:function(i){return n.rdc.request({type:"SDK_OPEN_FILE",payload:{path:i}})}}},"p");h.prototype.applyFsDiff=function(e){return this.rdc.request({type:"SDK_APPLY_FS_DIFF",payload:e})},h.prototype.getFsSnapshot=function(){return this.rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})},h.prototype.getDependencies=function(){return this.rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})};var m=[],H=r(function(e){var t=this;this.id=E(),this.element=e,this.pending=new Promise(function(n,i){var o=r(function(d){d.data.action&&d.data.action==="SDK_INIT_SUCCESS"&&d.data.id===t.id&&(t.vm=new h(d.ports[0],d.data.payload),n(t.vm),u())},"i"),a=r(function(){t.element.contentWindow&&t.element.contentWindow.postMessage({action:"SDK_INIT",id:t.id},"*")},"o");function u(){window.clearInterval(j),window.removeEventListener("message",o)}r(u,"r"),window.addEventListener("message",o),a();var w=0,j=window.setInterval(function(){if(t.vm)u();else{if(w>=20)return u(),i("Timeout: Unable to establish a connection with the StackBlitz VM"),void m.forEach(function(d,T){d.id===t.id&&m.splice(T,1)});w++,a()}},500)}),m.push(this)},"u"),K=r(function(e){var t=e instanceof Element?"element":"id",n=m.find(function(i){return i[t]===e});return n||null},"l"),_=["angular-cli","create-react-app","javascript","node","polymer","html","typescript","vue"];function c(e,t){var n=document.createElement("input");return n.type="hidden",n.name=e,n.value=t,n}r(c,"f");function P(e){_.indexOf(e.template)===-1&&console.warn("Unsupported project template, must be one of: "+_.join(", "));var t=document.createElement("form");return t.method="POST",t.setAttribute("style","display:none!important;"),t.appendChild(c("project[title]",e.title)),t.appendChild(c("project[description]",e.description)),t.appendChild(c("project[template]",e.template)),e.dependencies&&t.appendChild(c("project[dependencies]",JSON.stringify(e.dependencies))),e.settings&&t.appendChild(c("project[settings]",JSON.stringify(e.settings))),Object.keys(e.files).forEach(function(n){t.appendChild(c("project[files]["+n+"]",e.files[n]))}),t}r(P,"m");function B(e,t){var n=P(e);return n.action=p(t)+"/run"+l(t),n.id="sb","<html><head><title></title></head><body>"+n.outerHTML+"<script>document.getElementById('sb').submit();<\/script></body></html>"}r(B,"v");function G(e,t){var n=P(e);n.action=p(t)+"/run"+l(t),n.target=y(t),document.body.appendChild(n),n.submit(),document.body.removeChild(n)}r(G,"y");var f={connect:function(e){if(!e||!e.contentWindow)return Promise.reject("Provided element is not an iframe.");var t=K(e);return t?t.pending:new H(e).pending},openGithubProject:function(e,t){window.open(p(t)+"/github/"+e+l(t),y(t))},openProject:function(e,t){G(e,t)},openProjectId:function(e,t){window.open(p(t)+"/edit/"+e+l(t),y(t))},embedGithubProject:function(e,t,n){var i=v(e),o=document.createElement("iframe");return o.src=p(n)+"/github/"+t+l(n),g(i,o,n),f.connect(o)},embedProject:function(e,t,n){var i=v(e),o=B(t,n),a=document.createElement("iframe");return g(i,a,n),a.contentDocument&&a.contentDocument.write(o),f.connect(a)},embedProjectId:function(e,t,n){var i=v(e),o=document.createElement("iframe");return o.src=p(n)+"/edit/"+t+l(n),g(i,o,n),f.connect(o)}};const W=D("<aside></aside>");function V(){const e=k(),t=F(),[n,i]=C(!1);return O(async()=>{f.embedProjectId(e.ref,"suid-playground",{forceEmbedLayout:!0,openFile:"src/App.tsx",theme:t.darkMode?"dark":"light"}),setTimeout(()=>{i(!0)},1500)}),[s(N,{component:"h1",variant:"h4",sx:{mt:1},children:"Playground"}),s(b,{sx:{mt:2,"& iframe":{height:"70vh",border:0}},get children(){return[s(x,{get when(){return!n()},get children(){return s(L,{variant:"rectangular",height:"70vh"})}}),s(b,{get sx(){return{...!n()&&{visibility:"hidden",height:"0px"}}},get children(){const o=W.cloneNode(!0);return e(o),o}})]}}),s(q,{sx:{mt:2}})]}r(V,"PlaygroundPage");export{V as default};
