var I=Object.defineProperty;var r=(t,e)=>I(t,"name",{value:e,configurable:!0});import{a as C,l as O,d as s,S as x,t as D}from"./vendor.7f6460ea.js";import{v as F,T as N,B as b,a as k}from"./index.f8c435ad.js";import{S as L}from"./Skeleton.c0451e9e.js";import{P as q}from"./PageNav.b89c04b0.js";import"./Grid.67791fa5.js";function p(t){return t&&t.origin?t.origin:"https://stackblitz.com"}r(p,"e");var M="300";function E(){return Math.random().toString(36).substring(7)}r(E,"n");function l(t){var e=[];return t&&(t.forceEmbedLayout&&e.push("embed=1"),t.clickToLoad&&e.push("ctl=1"),typeof t.openFile=="string"&&e.push("file="+t.openFile),Array.isArray(t.openFile)&&t.openFile.forEach(function(n){typeof n=="string"&&e.push("file="+n)}),t.view!=="preview"&&t.view!=="editor"||e.push("view="+t.view),t.theme!=="light"&&t.theme!=="dark"||e.push("theme="+t.theme),t.hideExplorer&&e.push("hideExplorer=1"),t.hideNavigation&&e.push("hideNavigation=1"),t.hideDevTools&&e.push("hidedevtools=1"),typeof t.devToolsHeight=="number"&&t.devToolsHeight>=0&&t.devToolsHeight<=100&&e.push("devtoolsheight="+Math.round(t.devToolsHeight))),e.length?"?"+e.join("&"):""}r(l,"i");function g(t,e,n){if(t.parentNode===null)throw new Error("Invalid Element");e.id=t.id,A(e,n),t.parentNode.replaceChild(e,t)}r(g,"o");function v(t){if(typeof t=="string"){var e=document.getElementById(t);if(e!==null)return e}else if(t instanceof HTMLElement)return t;throw new Error("Invalid Element")}r(v,"r");function y(t){return t&&t.newWindow===!1?"_self":"_blank"}r(y,"a");function A(t,e){e&&(e.hasOwnProperty("height")&&(t.height=""+e.height),e.hasOwnProperty("width")&&(t.width=""+e.width)),t.height||(t.height=M),t.width||t.setAttribute("style","width:100%;")}r(A,"d");var S=r(function(t){var e=this;this.pending={},this.port=t,this.port.onmessage=function(n){if(n.data.payload.__reqid){var i=n.data.payload.__reqid,o=n.data.payload.__success;if(e.pending[i]){if(delete n.data.payload.__reqid,delete n.data.payload.__success,o){var a=Object.keys(n.data.payload).length===0&&n.data.payload.constructor===Object?null:n.data.payload;e.pending[i].resolve(a)}else{var u=n.data.payload.error?n.data.type+": "+n.data.payload.error:n.data.type;e.pending[i].reject(u)}delete e.pending[i]}}}},"c");S.prototype.request=function(t){var e=this,n=E();return new Promise(function(i,o){e.pending[n]={resolve:i,reject:o},t.payload.__reqid=n,e.port.postMessage(t)})};var h=r(function(t,e){var n=this;this.rdc=new S(t),this.preview={},Object.defineProperty(this.preview,"origin",{value:e.previewOrigin,writable:!1}),this.editor={openFile:function(i){return n.rdc.request({type:"SDK_OPEN_FILE",payload:{path:i}})}}},"p");h.prototype.applyFsDiff=function(t){return this.rdc.request({type:"SDK_APPLY_FS_DIFF",payload:t})},h.prototype.getFsSnapshot=function(){return this.rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})},h.prototype.getDependencies=function(){return this.rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})};var m=[],H=r(function(t){var e=this;this.id=E(),this.element=t,this.pending=new Promise(function(n,i){var o=r(function(d){d.data.action&&d.data.action==="SDK_INIT_SUCCESS"&&d.data.id===e.id&&(e.vm=new h(d.ports[0],d.data.payload),n(e.vm),u())},"i"),a=r(function(){e.element.contentWindow&&e.element.contentWindow.postMessage({action:"SDK_INIT",id:e.id},"*")},"o");function u(){window.clearInterval(j),window.removeEventListener("message",o)}r(u,"r"),window.addEventListener("message",o),a();var w=0,j=window.setInterval(function(){if(e.vm)u();else{if(w>=20)return u(),i("Timeout: Unable to establish a connection with the StackBlitz VM"),void m.forEach(function(d,T){d.id===e.id&&m.splice(T,1)});w++,a()}},500)}),m.push(this)},"u"),K=r(function(t){var e=t instanceof Element?"element":"id",n=m.find(function(i){return i[e]===t});return n||null},"l"),_=["angular-cli","create-react-app","javascript","node","polymer","html","typescript","vue"];function c(t,e){var n=document.createElement("input");return n.type="hidden",n.name=t,n.value=e,n}r(c,"f");function P(t){_.indexOf(t.template)===-1&&console.warn("Unsupported project template, must be one of: "+_.join(", "));var e=document.createElement("form");return e.method="POST",e.setAttribute("style","display:none!important;"),e.appendChild(c("project[title]",t.title)),e.appendChild(c("project[description]",t.description)),e.appendChild(c("project[template]",t.template)),t.dependencies&&e.appendChild(c("project[dependencies]",JSON.stringify(t.dependencies))),t.settings&&e.appendChild(c("project[settings]",JSON.stringify(t.settings))),Object.keys(t.files).forEach(function(n){e.appendChild(c("project[files]["+n+"]",t.files[n]))}),e}r(P,"m");function B(t,e){var n=P(t);return n.action=p(e)+"/run"+l(e),n.id="sb","<html><head><title></title></head><body>"+n.outerHTML+"<script>document.getElementById('sb').submit();<\/script></body></html>"}r(B,"v");function G(t,e){var n=P(t);n.action=p(e)+"/run"+l(e),n.target=y(e),document.body.appendChild(n),n.submit(),document.body.removeChild(n)}r(G,"y");var f={connect:function(t){if(!t||!t.contentWindow)return Promise.reject("Provided element is not an iframe.");var e=K(t);return e?e.pending:new H(t).pending},openGithubProject:function(t,e){window.open(p(e)+"/github/"+t+l(e),y(e))},openProject:function(t,e){G(t,e)},openProjectId:function(t,e){window.open(p(e)+"/edit/"+t+l(e),y(e))},embedGithubProject:function(t,e,n){var i=v(t),o=document.createElement("iframe");return o.src=p(n)+"/github/"+e+l(n),g(i,o,n),f.connect(o)},embedProject:function(t,e,n){var i=v(t),o=B(e,n),a=document.createElement("iframe");return g(i,a,n),a.contentDocument&&a.contentDocument.write(o),f.connect(a)},embedProjectId:function(t,e,n){var i=v(t),o=document.createElement("iframe");return o.src=p(n)+"/edit/"+e+l(n),g(i,o,n),f.connect(o)}};const W=D("<aside></aside>");function Y(){const t=k(),e=F(),[n,i]=C(!1);return O(async()=>{f.embedProjectId(t.ref,"suid-playground",{forceEmbedLayout:!0,openFile:"src/App.tsx",theme:e.darkMode?"dark":"light"}),setTimeout(()=>{i(!0)},1500)}),[s(N,{component:"h1",variant:"h4",sx:{mt:1},children:"Playground"}),s(b,{sx:{mt:2,"& iframe":{height:"70vh",border:0}},get children(){return[s(x,{get when(){return!n()},get children(){return s(L,{variant:"rectangular",height:"70vh"})}}),s(b,{get sx(){return{...!n()&&{visibility:"hidden",height:"0px"}}},get children(){const o=W.cloneNode(!0);return t(o),o}})]}}),s(q,{sx:{mt:2}})]}r(Y,"PlaygroundPage");export{Y as default};
