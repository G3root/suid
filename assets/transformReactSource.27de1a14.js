var u=Object.defineProperty;var a=(e,n)=>u(e,"name",{value:n,configurable:!0});import{ts as r,Node as E}from"https://esm.sh/ts-morph@^14.0.0";function s(e){const n=e.getParentWhileKind(r.SyntaxKind.QualifiedName);if(n)return n;const t=e.getParentWhileKind(r.SyntaxKind.TypeReference);if(t)return t;const l=e.getParentWhileKind(r.SyntaxKind.PropertyAccessExpression);return l||e}a(s,"getParentExpr");function S(e){const n=e.getImportDeclaration("react"),t=[];if(n){const l=n.getNamespaceImport();if(l)for(const i of l.findReferencesAsNodes()){if(i.getFirstAncestorByKind(r.SyntaxKind.NamespaceImport))continue;const m=s(i)?.getLastChildByKind(r.SyntaxKind.Identifier);m&&t.push({name:m.getText(),node:m})}}return t}a(S,"findReactObjects");function H(e){const n=e.getImportDeclarations(),t={};for(const l of n){const i=l.getModuleSpecifier().getLiteralText();if(!t[i])t[i]=l;else{const o=l.getNamedImports().map(m=>m.getText());for(const m of l.getNamedImports()){const d=m.getText();o.includes(d)||l.addNamedImport(d)}l.remove()}}}a(H,"groupImports");function y(e){const n=e.getImportDeclarations();for(const l of n)l.getModuleSpecifier().getLiteralText()==="prop-types"&&l.remove();const t=e.getChildrenOfKind(r.SyntaxKind.ExpressionStatement);for(const l of t)l.getFirstChildByKind(r.SyntaxKind.BinaryExpression)?.getFirstChildByKind(r.SyntaxKind.PropertyAccessExpression)?.getLastChildByKind(r.SyntaxKind.Identifier)?.getText()==="propTypes"&&l.remove()}a(y,"removePropTypes");function x(e){const n=e.getImportDeclarations();for(const t of n)t.getModuleSpecifier().getLiteralText()==="react"&&t.remove()}a(x,"removeReactImports");function G(e){for(const n of e.getImportDeclarations()){const t=n.getModuleSpecifier();t.getLiteralText().startsWith("@mui/")&&t.setLiteralValue(t.getLiteralText().replace(/^@mui/,"@suid"))}}a(G,"renameMuiImports");function c(e,n,t){const l=s(e);t?("namespaceImport"in t?l.replaceWithText(`${t.namespaceImport}.${n}`):"namespaceNamedImport"in t?l.replaceWithText(`${t.namespaceNamedImport}.${n}`):"namedImport"in t&&l.replaceWithText(`${n}`),e.getSourceFile().addImportDeclaration({moduleSpecifier:t.moduleSpecifier,..."namespaceImport"in t&&{namespaceImport:t.namespaceImport},..."namespaceNamedImport"in t&&{namespaceImport:t.namespaceNamedImport},..."namedImport"in t&&{namedImports:[t.namedImport]}})):l.replaceWithText(n)}a(c,"renameExpr");function I(e){c(e,"ElementType",{moduleSpecifier:"@suid/types",namespaceImport:"ST"})}a(I,"replaceReactElementType");function V(e){const n=e.getText();c(e,n,{moduleSpecifier:"@suid/types",namespaceImport:"ST"})}a(V,"replaceReactEventHandlers");function p(e,n,t){const l=e;l.__replacePatterns||(l.__replacePatterns={}),l.__replacePatterns[n]=t}a(p,"addReplacePattern");const T=`__EMPTY__${Date.now()}`;function F(e){const n=e.getFirstAncestorByKind(r.SyntaxKind.JsxElement);p(e.getSourceFile(),T,""),n?.set({name:T})}a(F,"replaceReactFragment");const{factory:f}=r,L={a:"HTMLAnchorElement",abbr:"HTMLElement",address:"HTMLElement",area:"HTMLAreaElement",article:"HTMLElement",aside:"HTMLElement",audio:"HTMLAudioElement",b:"HTMLElement",base:"HTMLBaseElement",bdi:"HTMLElement",bdo:"HTMLElement",big:"HTMLElement",blockquote:"HTMLElement",body:"HTMLBodyElement",br:"HTMLBRElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",caption:"HTMLElement",cite:"HTMLElement",code:"HTMLElement",col:"HTMLTableColElement",colgroup:"HTMLTableColElement",data:"HTMLElement",datalist:"HTMLDataListElement",dd:"HTMLElement",del:"HTMLElement",details:"HTMLDetailsElement",dfn:"HTMLElement",dialog:"HTMLElement",div:"HTMLDivElement",dl:"HTMLDListElement",dt:"HTMLElement",em:"HTMLElement",embed:"HTMLEmbedElement",fieldset:"HTMLFieldSetElement",figcaption:"HTMLElement",figure:"HTMLElement",footer:"HTMLElement",form:"HTMLFormElement",h1:"HTMLHeadingElement",h2:"HTMLHeadingElement",h3:"HTMLHeadingElement",h4:"HTMLHeadingElement",h5:"HTMLHeadingElement",h6:"HTMLHeadingElement",head:"HTMLHeadElement",header:"HTMLElement",hgroup:"HTMLElement",hr:"HTMLHRElement",html:"HTMLHtmlElement",i:"HTMLElement",iframe:"HTMLIFrameElement",img:"HTMLImageElement",input:"HTMLInputElement",ins:"HTMLModElement",kbd:"HTMLElement",keygen:"HTMLElement",label:"HTMLLabelElement",legend:"HTMLLegendElement",li:"HTMLLIElement",link:"HTMLLinkElement",main:"HTMLElement",map:"HTMLMapElement",mark:"HTMLElement",menu:"HTMLElement",menuitem:"HTMLElement",meta:"HTMLMetaElement",meter:"HTMLElement",nav:"HTMLElement",noindex:"HTMLElement",noscript:"HTMLElement",object:"HTMLObjectElement",ol:"HTMLOListElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLElement",p:"HTMLParagraphElement",param:"HTMLParamElement",picture:"HTMLElement",pre:"HTMLPreElement",progress:"HTMLProgressElement",q:"HTMLQuoteElement",rp:"HTMLElement",rt:"HTMLElement",ruby:"HTMLElement",s:"HTMLElement",samp:"HTMLElement",script:"HTMLElement",section:"HTMLElement",select:"HTMLSelectElement",small:"HTMLElement",source:"HTMLSourceElement",span:"HTMLSpanElement",strong:"HTMLElement",style:"HTMLStyleElement",sub:"HTMLElement",summary:"HTMLElement",sup:"HTMLElement",table:"HTMLTableElement",tbody:"HTMLTableSectionElement",td:"HTMLTableDataCellElement",textarea:"HTMLTextAreaElement",tfoot:"HTMLTableSectionElement",th:"HTMLTableHeaderCellElement",thead:"HTMLTableSectionElement",time:"HTMLElement",title:"HTMLTitleElement",tr:"HTMLTableRowElement",track:"HTMLTrackElement",u:"HTMLElement",ul:"HTMLUListElement",var:"HTMLElement",video:"HTMLVideoElement",wbr:"HTMLElement",svg:"SVGSVGElement",animate:"SVGAnimateElement",animateMotion:"SVGAnimateMotionElement",animateTransform:"SVGAnimateTransformElement",circle:"SVGCircleElement",clipPath:"SVGClipPathElement",defs:"SVGDefsElement",desc:"SVGDescElement",ellipse:"SVGEllipseElement",feBlend:"SVGFEBlendElement",feColorMatrix:"SVGFEColorMatrixElement",feComponentTransfer:"SVGFEComponentTransferElement",feComposite:"SVGFECompositeElement",feConvolveMatrix:"SVGFEConvolveMatrixElement",feDiffuseLighting:"SVGFEDiffuseLightingElement",feDisplacementMap:"SVGFEDisplacementMapElement",feDistantLight:"SVGFEDistantLightElement",feFlood:"SVGFEFloodElement",feFuncA:"SVGFEFuncAElement",feFuncB:"SVGFEFuncBElement",feFuncG:"SVGFEFuncGElement",feFuncR:"SVGFEFuncRElement",feGaussianBlur:"SVGFEGaussianBlurElement",feImage:"SVGFEImageElement",feMerge:"SVGFEMergeElement",feMergeNode:"SVGFEMergeNodeElement",feMorphology:"SVGFEMorphologyElement",feOffset:"SVGFEOffsetElement",fePointLight:"SVGFEPointLightElement",feSpecularLighting:"SVGFESpecularLightingElement",feSpotLight:"SVGFESpotLightElement",feTile:"SVGFETileElement",feTurbulence:"SVGFETurbulenceElement",filter:"SVGFilterElement",foreignObject:"SVGForeignObjectElement",g:"SVGGElement",image:"SVGImageElement",line:"SVGLineElement",linearGradient:"SVGLinearGradientElement",marker:"SVGMarkerElement",mask:"SVGMaskElement",metadata:"SVGMetadataElement",path:"SVGPathElement",pattern:"SVGPatternElement",polygon:"SVGPolygonElement",polyline:"SVGPolylineElement",radialGradient:"SVGRadialGradientElement",rect:"SVGRectElement",stop:"SVGStopElement",switch:"SVGSwitchElement",symbol:"SVGSymbolElement",text:"SVGTextElement",textPath:"SVGTextPathElement",tspan:"SVGTSpanElement",use:"SVGUseElement",view:"SVGViewElement"};function h(e){for(const n in L)if(L[n]===e)return n}a(h,"findTag");function b(e){const n=s(e),l=n?.getParentIfKind(r.SyntaxKind.TypeReference)?.getLastChildByKind(r.SyntaxKind.TypeReference);if(l){const i=l.getLastChildByKind(r.SyntaxKind.Identifier)?.getText(),o=i?h(i):null;o&&l.transform(()=>f.createLiteralTypeNode(f.createStringLiteral(o))),n?.replaceWithText("ST.PropsOf"),e.getSourceFile().addImportDeclaration({namespaceImport:"ST",moduleSpecifier:"@suid/types"})}}a(b,"replaceReactHTMLAttributes");function K(e){c(e,"JSXElement",{moduleSpecifier:"solid-js",namespaceNamedImport:"JSX"})}a(K,"replaceReactNode");function C(e){c(e,"Ref",{moduleSpecifier:"@suid/types",namespaceImport:"ST"})}a(C,"replaceReactRef");const M=`__REMOVE__${Date.now()}`;function P(e){const n=s(e),t=n.getParentIfKind(r.SyntaxKind.CallExpression);if(t){const l=t.getArguments();for(let i=1;i<l.length;++i)t.removeArgument(1);p(e.getSourceFile(),M,""),n.replaceWithText(M)}}a(P,"replaceReactUseCallback");function R(e){c(e,"useContext",{moduleSpecifier:"solid-js",namedImport:"useContext"})}a(R,"replaceReactUseContext");function A(e){const n=s(e),t=n.getParentIfKind(r.SyntaxKind.CallExpression);let l="createEffect";if(t){const[i,o]=t.getArguments();let m="";if((E.isFunctionExpression(i)||E.isArrowFunction(i))&&(m=i.getReturnType().getText()),m.startsWith("() =>"))return;E.isArrayLiteralExpression(o)&&!o.getElements().length&&(l="onMount"),t.removeArgument(o)}n.replaceWithText(l),e.getSourceFile().addImportDeclaration({namedImports:[l],moduleSpecifier:"solid-js"})}a(A,"replaceReactUseEffect");const g=`__CALLFUNCTION__${Date.now()}`;function B(e,n=!1){const t=e.getText();p(e.getSourceFile(),g,"()"),e.rename(`${t}${g}`),n&&e.replaceWithText(t)}a(B,"renameGetterVarToCall");function v(e){const n=e.getFirstAncestorByKind(r.SyntaxKind.CallExpression),t=n?.getFirstAncestorByKind(r.SyntaxKind.VariableDeclaration);if(t){const i=t.getFirstDescendantByKind(r.SyntaxKind.ArrayBindingPattern);if(i){const m=i.getFirstDescendantByKind(r.SyntaxKind.BindingElement)?.getFirstDescendantByKind(r.SyntaxKind.Identifier);m&&B(m,!0)}}n?.getFirstDescendantByKind(r.SyntaxKind.PropertyAccessExpression)?.replaceWithText("createSignal"),e.getSourceFile().addImportDeclaration({namedImports:["createSignal"],moduleSpecifier:"solid-js"})}a(v,"replaceReactUseState");const N={Fragment:F,ElementType:I,HTMLAttributes:b,ReactNode:K,Ref:C,useCallback:P,useContext:R,useState:v,useEffect:A};function O(e){const n=S(e);for(const t of n){if(t.node.wasForgotten())continue;let l=N[t.name];l||t.name.endsWith("EventHandler")&&(l=V),l?.(t.node)}G(e),x(e),y(e),H(e)}a(O,"transformReactSource");export{O as default};
