var I=Object.defineProperty;var l=(e,n)=>I(e,"name",{value:n,configurable:!0});import{ts as o,Node as T}from"https://esm.sh/ts-morph@^14.0.0";import{a2 as h}from"./index.bf44a517.js";function c(e){const n=e.getParentWhileKind(o.SyntaxKind.QualifiedName);if(n)return n;const t=e.getParentWhileKind(o.SyntaxKind.TypeReference);if(t)return t;const a=e.getParentWhileKind(o.SyntaxKind.PropertyAccessExpression);return a||e}l(c,"getParentExpr");function G(e,n){const t=e.getImportDeclaration("react"),a=[],i=l(r=>{const m=r.getText();(!n||n.includes(m))&&a.push({name:m,node:r})},"push");if(t){const r=t.getNamespaceImport(),m=t.getNamedImports();for(const p of m){const E=p.getFirstChildByKind(o.SyntaxKind.Identifier);if(E)for(const d of E.findReferencesAsNodes())d!==E&&T.isIdentifier(d)&&i(d)}if(r)for(const p of r.findReferencesAsNodes()){if(p.getFirstAncestorByKind(o.SyntaxKind.NamespaceImport))continue;const d=c(p)?.getLastChildByKind(o.SyntaxKind.Identifier);d&&i(d)}}return a}l(G,"findReactObjects");function u(e,n){e.includes(n)||e.push(n)}l(u,"add");function F(e){const n=e.getImportDeclarations(),t={};for(const a of n){const i=a.getModuleSpecifier().getLiteralText();t[i]||(t[i]={nodes:[],named:[],defaults:[],namespaces:[]}),t[i].nodes.push(a);for(const p of a.getNamedImports())u(t[i].named,p.getText());const r=a.getDefaultImport();r&&u(t[i].defaults,r.getText());const m=a.getNamespaceImport();m&&u(t[i].namespaces,m.getText())}for(const a in t){const i=t[a];i.named.length&&e.addImportDeclaration({moduleSpecifier:a,namedImports:i.named});for(const r of i.defaults)e.addImportDeclaration({moduleSpecifier:a,defaultImport:r});for(const r of i.namespaces)e.addImportDeclaration({moduleSpecifier:a,namespaceImport:r});for(const r of i.nodes)r.remove()}}l(F,"groupImports");function V(e){const n=e.getImportDeclarations();for(const a of n)a.getModuleSpecifier().getLiteralText()==="prop-types"&&a.remove();const t=e.getChildrenOfKind(o.SyntaxKind.ExpressionStatement);for(const a of t)a.getFirstChildByKind(o.SyntaxKind.BinaryExpression)?.getFirstChildByKind(o.SyntaxKind.PropertyAccessExpression)?.getLastChildByKind(o.SyntaxKind.Identifier)?.getText()==="propTypes"&&a.remove()}l(V,"removePropTypes");function b(e){const n=e.getImportDeclarations();for(const t of n)t.getModuleSpecifier().getLiteralText()==="react"&&t.remove()}l(b,"removeReactImports");function K(e){for(const n of e.getImportDeclarations()){const t=n.getModuleSpecifier();t.getLiteralText().startsWith("@mui/")&&t.setLiteralValue(t.getLiteralText().replace(/^@mui/,"@suid"))}}l(K,"renameMuiImports");function s(e,n,t){const a=c(e);t?("namespaceImport"in t?a.replaceWithText(`${t.namespaceImport}.${n}`):"namespaceNamedImport"in t?a.replaceWithText(`${t.namespaceNamedImport}.${n}`):"namedImport"in t&&a.replaceWithText(`${n}`),e.getSourceFile().addImportDeclaration({moduleSpecifier:t.moduleSpecifier,..."namespaceImport"in t&&{namespaceImport:t.namespaceImport},..."namespaceNamedImport"in t&&{namespaceImport:t.namespaceNamedImport},..."namedImport"in t&&{namedImports:[t.namedImport]}})):a.replaceWithText(n)}l(s,"renameExpr");function C(e){s(e,"Context",{moduleSpecifier:"solid-js",namedImport:"Context"})}l(C,"replaceReactContext");function R(e){s(e,"createContext",{moduleSpecifier:"solid-js",namedImport:"createContext"})}l(R,"replaceReactCreateContext");function A(e){s(e,"ElementType",{moduleSpecifier:"@suid/types",namespaceImport:"ST"})}l(A,"replaceReactElementType");function B(e){const n=e.getText();s(e,n,{moduleSpecifier:"@suid/types",namespaceImport:"ST"})}l(B,"replaceReactEventHandlers");function P(e){const n=e.getText();n==="ChangeEvent"?s(e,n,{moduleSpecifier:"@suid/types",namespaceImport:"ST"}):s(e,n)}l(P,"replaceReactEvents");function g(e,n,t){const a=e;a.__replacePatterns||(a.__replacePatterns={}),a.__replacePatterns[n]=t}l(g,"addReplacePattern");const L=`__EMPTY__${Date.now()}`;function v(e){const n=e.getFirstAncestorByKind(o.SyntaxKind.JsxElement);g(e.getSourceFile(),L,""),n?.set({name:L})}l(v,"replaceReactFragment");const{factory:f}=o,M={a:"HTMLAnchorElement",abbr:"HTMLElement",address:"HTMLElement",area:"HTMLAreaElement",article:"HTMLElement",aside:"HTMLElement",audio:"HTMLAudioElement",b:"HTMLElement",base:"HTMLBaseElement",bdi:"HTMLElement",bdo:"HTMLElement",big:"HTMLElement",blockquote:"HTMLElement",body:"HTMLBodyElement",br:"HTMLBRElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",caption:"HTMLElement",cite:"HTMLElement",code:"HTMLElement",col:"HTMLTableColElement",colgroup:"HTMLTableColElement",data:"HTMLElement",datalist:"HTMLDataListElement",dd:"HTMLElement",del:"HTMLElement",details:"HTMLDetailsElement",dfn:"HTMLElement",dialog:"HTMLElement",div:"HTMLDivElement",dl:"HTMLDListElement",dt:"HTMLElement",em:"HTMLElement",embed:"HTMLEmbedElement",fieldset:"HTMLFieldSetElement",figcaption:"HTMLElement",figure:"HTMLElement",footer:"HTMLElement",form:"HTMLFormElement",h1:"HTMLHeadingElement",h2:"HTMLHeadingElement",h3:"HTMLHeadingElement",h4:"HTMLHeadingElement",h5:"HTMLHeadingElement",h6:"HTMLHeadingElement",head:"HTMLHeadElement",header:"HTMLElement",hgroup:"HTMLElement",hr:"HTMLHRElement",html:"HTMLHtmlElement",i:"HTMLElement",iframe:"HTMLIFrameElement",img:"HTMLImageElement",input:"HTMLInputElement",ins:"HTMLModElement",kbd:"HTMLElement",keygen:"HTMLElement",label:"HTMLLabelElement",legend:"HTMLLegendElement",li:"HTMLLIElement",link:"HTMLLinkElement",main:"HTMLElement",map:"HTMLMapElement",mark:"HTMLElement",menu:"HTMLElement",menuitem:"HTMLElement",meta:"HTMLMetaElement",meter:"HTMLElement",nav:"HTMLElement",noindex:"HTMLElement",noscript:"HTMLElement",object:"HTMLObjectElement",ol:"HTMLOListElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLElement",p:"HTMLParagraphElement",param:"HTMLParamElement",picture:"HTMLElement",pre:"HTMLPreElement",progress:"HTMLProgressElement",q:"HTMLQuoteElement",rp:"HTMLElement",rt:"HTMLElement",ruby:"HTMLElement",s:"HTMLElement",samp:"HTMLElement",script:"HTMLElement",section:"HTMLElement",select:"HTMLSelectElement",small:"HTMLElement",source:"HTMLSourceElement",span:"HTMLSpanElement",strong:"HTMLElement",style:"HTMLStyleElement",sub:"HTMLElement",summary:"HTMLElement",sup:"HTMLElement",table:"HTMLTableElement",tbody:"HTMLTableSectionElement",td:"HTMLTableDataCellElement",textarea:"HTMLTextAreaElement",tfoot:"HTMLTableSectionElement",th:"HTMLTableHeaderCellElement",thead:"HTMLTableSectionElement",time:"HTMLElement",title:"HTMLTitleElement",tr:"HTMLTableRowElement",track:"HTMLTrackElement",u:"HTMLElement",ul:"HTMLUListElement",var:"HTMLElement",video:"HTMLVideoElement",wbr:"HTMLElement",svg:"SVGSVGElement",animate:"SVGAnimateElement",animateMotion:"SVGAnimateMotionElement",animateTransform:"SVGAnimateTransformElement",circle:"SVGCircleElement",clipPath:"SVGClipPathElement",defs:"SVGDefsElement",desc:"SVGDescElement",ellipse:"SVGEllipseElement",feBlend:"SVGFEBlendElement",feColorMatrix:"SVGFEColorMatrixElement",feComponentTransfer:"SVGFEComponentTransferElement",feComposite:"SVGFECompositeElement",feConvolveMatrix:"SVGFEConvolveMatrixElement",feDiffuseLighting:"SVGFEDiffuseLightingElement",feDisplacementMap:"SVGFEDisplacementMapElement",feDistantLight:"SVGFEDistantLightElement",feFlood:"SVGFEFloodElement",feFuncA:"SVGFEFuncAElement",feFuncB:"SVGFEFuncBElement",feFuncG:"SVGFEFuncGElement",feFuncR:"SVGFEFuncRElement",feGaussianBlur:"SVGFEGaussianBlurElement",feImage:"SVGFEImageElement",feMerge:"SVGFEMergeElement",feMergeNode:"SVGFEMergeNodeElement",feMorphology:"SVGFEMorphologyElement",feOffset:"SVGFEOffsetElement",fePointLight:"SVGFEPointLightElement",feSpecularLighting:"SVGFESpecularLightingElement",feSpotLight:"SVGFESpotLightElement",feTile:"SVGFETileElement",feTurbulence:"SVGFETurbulenceElement",filter:"SVGFilterElement",foreignObject:"SVGForeignObjectElement",g:"SVGGElement",image:"SVGImageElement",line:"SVGLineElement",linearGradient:"SVGLinearGradientElement",marker:"SVGMarkerElement",mask:"SVGMaskElement",metadata:"SVGMetadataElement",path:"SVGPathElement",pattern:"SVGPatternElement",polygon:"SVGPolygonElement",polyline:"SVGPolylineElement",radialGradient:"SVGRadialGradientElement",rect:"SVGRectElement",stop:"SVGStopElement",switch:"SVGSwitchElement",symbol:"SVGSymbolElement",text:"SVGTextElement",textPath:"SVGTextPathElement",tspan:"SVGTSpanElement",use:"SVGUseElement",view:"SVGViewElement"};function D(e){for(const n in M)if(M[n]===e)return n}l(D,"findTag");function N(e){const n=c(e),a=n?.getParentIfKind(o.SyntaxKind.TypeReference)?.getLastChildByKind(o.SyntaxKind.TypeReference);if(a){const i=a.getLastChildByKind(o.SyntaxKind.Identifier)?.getText(),r=i?D(i):null;if(r)a.transform(()=>f.createLiteralTypeNode(f.createStringLiteral(r)));else{const m=h(e.getText().replace(/HTMLAttributes$/,""));m.length&&a.transform(()=>f.createLiteralTypeNode(f.createStringLiteral(m)))}n?.replaceWithText("ST.PropsOf"),e.getSourceFile().addImportDeclaration({namespaceImport:"ST",moduleSpecifier:"@suid/types"})}}l(N,"replaceReactHTMLAttributes");const S=`__REMOVE__${Date.now()}`;function _(e){const n=c(e),t=n.getParentIfKind(o.SyntaxKind.CallExpression);if(t){const a=t.getArguments();for(let i=1;i<a.length;++i)t.removeArgument(1);g(e.getSourceFile(),S,""),n.replaceWithText(S)}}l(_,"replaceReactMemo");function W(e){s(e,"JSXElement",{moduleSpecifier:"solid-js",namespaceNamedImport:"JSX"})}l(W,"replaceReactNode");function j(e){s(e,"Ref",{moduleSpecifier:"@suid/types",namespaceImport:"ST"})}l(j,"replaceReactRef");const H=`__REMOVE__${Date.now()}`;function O(e){const n=c(e),t=n.getParentIfKind(o.SyntaxKind.CallExpression);if(t){const a=t.getArguments();for(let i=1;i<a.length;++i)t.removeArgument(1);g(e.getSourceFile(),H,""),n.replaceWithText(H)}}l(O,"replaceReactUseCallback");function k(e){s(e,"useContext",{moduleSpecifier:"solid-js",namedImport:"useContext"})}l(k,"replaceReactUseContext");function $(e){const n=c(e),t=n.getParentIfKind(o.SyntaxKind.CallExpression);let a="createEffect";if(t){const[i,r]=t.getArguments();let m="";if((T.isFunctionExpression(i)||T.isArrowFunction(i))&&(m=i.getReturnType().getText()),m.startsWith("() =>"))return;T.isArrayLiteralExpression(r)&&!r.getElements().length&&(a="onMount"),t.removeArgument(r)}n.replaceWithText(a),e.getSourceFile().addImportDeclaration({namedImports:[a],moduleSpecifier:"solid-js"})}l($,"replaceReactUseEffect");const x=`__CALLFUNCTION__${Date.now()}`;function y(e,n=!1){const t=e.getText();g(e.getSourceFile(),x,"()"),e.rename(`${t}${x}`),n&&e.replaceWithText(t)}l(y,"renameGetterVarToCall");function w(e){const n=c(e),t=n.getFirstAncestorByKind(o.SyntaxKind.CallExpression);if(t){const a=t.getFirstAncestorByKind(o.SyntaxKind.VariableDeclaration);if(a){const r=a.getFirstChildByKind(o.SyntaxKind.Identifier);r&&y(r,!0)}t.getArguments().length>1&&t.removeArgument(1)}n.replaceWithText("createMemo"),e.getSourceFile().addImportDeclaration({namedImports:["createMemo"],moduleSpecifier:"solid-js"})}l(w,"replaceReactUseMemo");function U(e){const n=c(e),a=n.getFirstAncestorByKind(o.SyntaxKind.CallExpression)?.getFirstAncestorByKind(o.SyntaxKind.VariableDeclaration);if(a){const i=a.getFirstDescendantByKind(o.SyntaxKind.ArrayBindingPattern);if(i){const m=i.getFirstDescendantByKind(o.SyntaxKind.BindingElement)?.getFirstDescendantByKind(o.SyntaxKind.Identifier);m&&y(m,!0)}}n.replaceWithText("createSignal"),e.getSourceFile().addImportDeclaration({namedImports:["createSignal"],moduleSpecifier:"solid-js"})}l(U,"replaceReactUseState");const q={Fragment:v,Context:C,createContext:R,ElementType:A,memo:_,ReactNode:W,Ref:j,useCallback:O,useContext:k,useState:U,useMemo:w,useEffect:$};function z(e){const n=G(e);for(const t of n){if(t.node.wasForgotten())continue;let a=q[t.name];a||(t.name.endsWith("EventHandler")?a=B:t.name.endsWith("Event")?a=P:t.name.endsWith("HTMLAttributes")&&(a=N)),a?.(t.node)}K(e),b(e),V(e),F(e)}l(z,"transformReactSource");export{z as default};
